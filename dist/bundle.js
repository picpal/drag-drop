(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}function n(e,t,n){const r=n.value;return{configurable:!0,get(){return r.bind(this)}}}var r;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new i),this.instance}addProject(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.Active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const l=i.getInstance();class o extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=parseFloat(this.peopleInputElement.value),s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1,max:5};return t({value:e,required:!0})&&t(s)&&t(i)?[e,n,r]:void alert("유효하지 않은 입력입니다.")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;l.addProject(e,n,r),this.clearInputs()}}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],o.prototype,"submitHandler",null);class a extends e{constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}get persons(){return 1===this.project.people?"1 명 밖에 없네요..":`${this.project.people} 명 참가!!!`}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons,this.element.querySelector("p").textContent=this.project.description}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],a.prototype,"dragStartHandler",null);var c=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class d extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");l.moveProject(t,"active"===this.type?r.Active:r.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),l.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new a(this.element.querySelector("ul").id,e)}}c([n],d.prototype,"dragOverHandler",null),c([n],d.prototype,"dropHandler",null),c([n],d.prototype,"dragLeaveHandler",null),new o,new d("active"),new d("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEcsQ0FHQUMsaUJBQWlCYixHQUVBakcsS0FBS1EsUUFBUTJELGNBQWMsTUFDbkNxQyxVQUFVTyxPQUFPLFlBQzFCLENBRUF6QyxZQUNFdEUsS0FBS1EsUUFBUStELGlCQUFpQixXQUFZdkUsS0FBS3NHLGlCQUMvQ3RHLEtBQUtRLFFBQVErRCxpQkFBaUIsWUFBYXZFLEtBQUs4RyxrQkFDaEQ5RyxLQUFLUSxRQUFRK0QsaUJBQWlCLE9BQVF2RSxLQUFLMEcsYUFFM0MzQyxFQUFhckIsYUFBYUksSUFDeEIsTUFBTWtFLEVBQW1CbEUsRUFBU21FLFFBQU9wRCxHQUNyQixXQUFkN0QsS0FBS29HLEtBQ0F2QyxFQUFJdEIsU0FBV0wsRUFBY29CLE9BRS9CTyxFQUFJdEIsU0FBV0wsRUFBYzJFLFdBR3RDN0csS0FBS3FHLGlCQUFtQlcsRUFDeEJoSCxLQUFLa0gsZ0JBQWdCLEdBRXpCLENBR0F6QyxnQkFDRSxNQUFNMEMsRUFBUyxHQUFHbkgsS0FBS29HLHFCQUN2QnBHLEtBQUtRLFFBQVEyRCxjQUFjLE1BQU96RCxHQUFLeUcsRUFDdkNuSCxLQUFLUSxRQUFRMkQsY0FBYyxNQUFPK0IsWUFBY2xHLEtBQUtvRyxLQUFLZ0IsY0FBZ0IsV0FFNUUsQ0FFUUYsaUJBQ1NoSCxTQUFTQyxlQUFlLEdBQUdILEtBQUtvRyxzQkFFeENpQixVQUFZLEdBQ25CLElBQUssTUFBTUMsS0FBV3RILEtBQUtxRyxpQkFDekIsSUFBSVosRUFBWXpGLEtBQUtRLFFBQVEyRCxjQUFjLE1BQU96RCxHQUFJNEcsRUFFMUQsRUExREEsR0FEQzVGLEcsb0NBYUQsR0FEQ0EsRyxnQ0FRRCxHQURDQSxHLHFDQ3BDSCxJQUFJdUMsRUFDSixJQUFJa0MsRUFBWSxVQUNoQixJQUFJQSxFQUFZLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvdXRpbC92YWxpZGF0aW9uLnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9kZWNvcmF0b3IvYXV0b0JpbmQudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL21vZGVsL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy/su7Ttj6zrhIztirgg7YG0656Y7IqkXG4vL+uNsOydtO2EsCDtg4DsnoXsnbQg6rCA67OA7KCB7J206528IOygnOuEpOumreydhCDsnbTsmqlcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQsIFUgZXh0ZW5kcyBIVE1MRWxlbWVudD4ge1xuICB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gIGhvc3RFbGVtZW50OiBUO1xuICBlbGVtZW50OiBVO1xuXG5cbiAgLy8g7Iug6recIOyDneyEseuQmOuKlCBlbGVtZW507JeQIGlk64qUIO2VhOyImOqwgCDslYTri4jquLAg65WM66y47JeQIOyEoO2DneyggeycvOuhnCDsmLXshZjsspjrpqztlahcbiAgY29uc3RydWN0b3IodGVtcGxhdGVJZDogc3RyaW5nLCBob3N0RWxlbWVudElkOiBzdHJpbmcsIGluc2VydEF0U3RhcnQ6IGJvb2xlYW4sIG5ld0VsZW1lbnRJZD86IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIC8vIO2FnO2UjOumvyBlbGVtZW50XG4gICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZUlkKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICAvLyDquLDspIAgZWxlbWVudFxuICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0RWxlbWVudElkKSEgYXMgVDtcbiAgICAvLyDstpTqsIDrkJjripQgZWxlbWVudFxuICAgIGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XG4gICAgLy8g7LaU6rCA65CY64qUIGVsZW1lbnQgY29udGVudOulvCBlbGVtZW507JeQIO2VoOuLuVxuICAgIHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xuICAgIC8vIOy2lOqwgOuQmOuKlCBlbGVtZW507JeQIOu2gOyXrOuQmOuKlCBpZCBcbiAgICBpZiAobmV3RWxlbWVudElkKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWQ7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XG5cbiAgfVxuXG4gIHByaXZhdGUgYXR0YWNoKGluc2VydEF0QmVnaW5pbmc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmhvc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChpbnNlcnRBdEJlZ2luaW5nID8gJ2FmdGVyYmVnaW4nIDogJ2JlZm9yZWVuZCcsIHRoaXMuZWxlbWVudCk7XG4gIH1cblxuICBhYnN0cmFjdCBjb25maWd1cmUoKTogdm9pZDtcbiAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCgpOiB2b2lkO1xufVxuXG5cbiIsIlxuLy8g6rCd7LK07JeQIOuMgO2VnCDsnKDtmqgg7YOA7J6F7KCV7J2Y64qUIGludGVyZmFjZeulvCDsgqzsmqntlZjsnpAhISBcbi8vICgg7IKs7Jqp7J6QIOygleydmCB0eXBl66W8IOyCrOyaqe2VtOuPhCDqsJnsnYAg7Zqo6rO87J207KeA66eMIOygle2Yle2ZlOyLnOy8nOyEnCDqt5zsuZnshLHsnbQg7J6I64qUIOuKkOuCjOydhCDso7zquLAg7JyE7ZW0IClcbi8vIOyerCDsgqzsmqnshLHsnYQg7JyE7ZW07IScIOyeheugpSDqsJIg7J207Jm47JeQ64qUIOyEoO2DneyCrO2VreycvOuhnCDrkaBcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xuICB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyO1xuICByZXF1aXJlZD86IGJvb2xlYW47XG4gIG1pbkxlbmd0aD86IG51bWJlcjtcbiAgbWF4TGVuZ3RoPzogbnVtYmVyO1xuICBtaW4/OiBudW1iZXI7XG4gIG1heD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKSB7XG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQucmVxdWlyZWQpIHtcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcbiAgfVxuXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsICYmIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoID49IHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoO1xuICB9XG5cbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS5sZW5ndGggPD0gdmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGg7XG4gIH1cblxuICBpZiAodmFsaWRhdGFibGVJbnB1dC5taW4gIT0gbnVsbCAmJiB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluO1xuICB9XG5cbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heDtcbiAgfVxuXG4gIHJldHVybiBpc1ZhbGlkO1xufVxuXG4iLCJcbi8vIGF1dG9iaW5kIOuNsOy9lOugiOydtO2EsFxuZXhwb3J0IGZ1bmN0aW9uIEF1dG9CaW5kKF90YXJnZXQ6IGFueSwgX21ldGhvZDogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcbiAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICBjb25zdCBhZGpEZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IgPSB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldCgpIHtcbiAgICAgIGNvbnN0IGJvdW5kRm4gPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xuICAgICAgcmV0dXJuIGJvdW5kRm47XG4gICAgfVxuICB9XG4gIHJldHVybiBhZGpEZXNjcmlwdG9yO1xufVxuIiwiZXhwb3J0IGVudW0gUHJvamVjdFN0YXR1cyB7IEFjdGl2ZSwgRmluaXNoZWQgfVxuXG4vLyBwcm9qZWN0IFR5cGVcbi8vIO2VreyDgSDrj5nsnbztlZwg6rWs7KGw66W8IOqwluuKlCDtlITroZzsoJ3tirgg6rCd7LK0IOq1rOy2leydhCDtlZjquLAg7JyE7ZWcIHByb2plY3TsnZggdHlwZeydhCDshKTsoJVcbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGlkOiBzdHJpbmcsXG4gICAgcHVibGljIHRpdGxlOiBzdHJpbmcsXG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgcHVibGljIHBlb3BsZTogbnVtYmVyLFxuICAgIHB1YmxpYyBzdGF0dXM6IFByb2plY3RTdGF0dXMsXG4gICkge1xuXG4gIH1cbn1cbiIsImltcG9ydCB7UHJvamVjdCxQcm9qZWN0U3RhdHVzfSBmcm9tICcuLi9tb2RlbC9wcm9qZWN0J1xuXG5cbnR5cGUgTGlzdGVuZXI8VD4gPSAoaXRlbXM6IFRbXSkgPT4gdm9pZDtcblxuY2xhc3MgU3RhdGU8VD4ge1xuICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdID0gW107IC8vIOyDgeyGjeuwm+ydgCDtgbTrnpjsiqQg64K07JeQ7IScIOyCrOyaqeqwgOuKpe2VmOqyjCDtlZjrqbTshJwg7Jm467aA7KCR6re87J2AIOunieq4sCDsnITtlbQgcHJvdGVjdGVkIOyCrOyaqS5cblxuICBhZGRMaXN0ZW5lcihsaXN0ZW5lckZuOiBMaXN0ZW5lcjxUPikge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7IC8vIO2VqOyImCDssLjsobAg67Cw7Je0XG4gIH1cbn1cblxuLy8gcHJvamVjdCBzdGF0ZVxuZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSBleHRlbmRzIFN0YXRlPFByb2plY3Q+e1xuXG4gIHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtdO1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUHJvamVjdFN0YXRlXG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgLy8g7KCE7Jet7Jy866GcIOyCrOyaqeuQmOuKlCDsg4Htg5zquLAg65WM66y47JeQIO2VmOuCmOydmCDqsJ3ssrTrp4wg66eM65Ok7Ja07IScIOq0gOumrCBzaW5nbGV0b25cbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICh0aGlzLmluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICB9XG4gICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBQcm9qZWN0U3RhdGUoKTtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgfVxuXG5cblxuICBhZGRQcm9qZWN0KHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG51bU9mUGVvcGxlOiBudW1iZXIpIHtcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QoXG4gICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksXG4gICAgICB0aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbnVtT2ZQZW9wbGUsXG4gICAgICBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxuICAgIClcblxuICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xuICB9XG5cbiAgbW92ZVByb2plY3QocHJvamVjdElkOiBzdHJpbmcsIG5ld1N0YXR1czogUHJvamVjdFN0YXR1cykge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQocHJqID0+IHByai5pZCA9PT0gcHJvamVjdElkKTtcbiAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XG4gICAgICBwcm9qZWN0LnN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVMaXN0ZW5lcnMoKSB7XG5cbiAgICAvLyDsg4jroZzsmrQg67OA7ZmU6rCAIOyeiOydhOuWhOuniOuLpCDrqqjrk6Ag66as7Iqk64SIIO2VqOyImOulvCDssrTtgaxcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyRm4gb2YgdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgIC8vIOumrOyKpOuEiCDtlajsiJgg7JuQ67O47J20IOyVhOuLjCDrs7XsgqzrkJwg6rKD7J2EIOydtOyaqSBcbiAgICAgIC8vICgg7JuQ656YIOuwsOyXtOydhCDsoITri6ztlZjrqbQg7Jm467aA7JeQ7ISc64+EIOuzgOqyveydtCDqsIDriqXtlZjqs6AgXG4gICAgICAvLyDsl6zquLDsl5DshJwg66y07JeI7J2EIOuzgOqyve2VnOqyg+ydhCBwdXNo7ZWY66m0IOyVseydmCDrqqjrk6Dqs7Psl5DshJwg7JuQ67O47J20IOuzgOqyveydtCDrkJjrsoTrpqzquLAg65WM66y4XG4gICAgICAvLyDsl6zquLDshJzripQg7Jqw7ISg7J2AIOuzgOqyveydhCDslYzslYTssKjrpqzsp4Ag66q77ZWY6rKMIO2VmOq4sCDsnITtlbQg67O17IKs65CcIOywuOyhsOulvCDsgqzsmqkgKVxuICAgICAgbGlzdGVuZXJGbih0aGlzLnByb2plY3RzLnNsaWNlKCkpO1xuXG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IHByb2plY3RTdGF0ZSA9IFByb2plY3RTdGF0ZS5nZXRJbnN0YW5jZSgpOyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBWYWxpZGF0aW9uIGZyb20gJy4uL3V0aWwvdmFsaWRhdGlvbidcbmltcG9ydCB7IEF1dG9CaW5kIGFzIGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9yL2F1dG9CaW5kJztcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3Qtc3RhdGUnO1xuXG4vLyDslpHsi50g7IOd7ISxIOuwjyDsgqzsmqnsnpAg7J6F66ClIOyImOynkSBjbGFzc1xuZXhwb3J0IGNsYXNzIFByb2plY3RJbnB1dCBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEZvcm1FbGVtZW50PntcbiAgdGl0bGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xuICBwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3Byb2plY3QtaW5wdXQnLCAnYXBwJywgdHJ1ZSwgJ3VzZXItaW5wdXQnKTtcblxuICAgIC8vIOqwnOuzhCBlbGVtZW50IOygkeq3vFxuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykhIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKSEgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjcGVvcGxlJykhIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xuICB9XG5cbiAgLy8gZm9ybSBlbGVtZW507JeQIOydtOuypO2KuCDstpTqsIBcbiAgY29uZmlndXJlKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgcmVuZGVyQ29udGVudCgpOiB2b2lkIHsgfVxuXG4gIC8vIOycoO2aqO2VmOyngCDslYrsnYAg6rCS7JeQIOuMgO2VtOyEnOuKlCDrsJjtmZjsnYQg7ZWY7KeAIOyViuq4sOychO2VtCB2b2lkIOy2lOqwgCAo7ZWo7IiY7J2YIOuwmO2ZmOydgCDrtoDsoJXtmJXsnLzroZwg7ZWY66m07JWI65CY7IScIHVuZGVmaW5kIOyCrOyaqeyViO2VqClcbiAgcHJpdmF0ZSBnYXRoZXJVc2VySW5wdXQoKTogW3N0cmluZywgc3RyaW5nLCBudW1iZXJdIHwgdm9pZCB7XG4gICAgY29uc3QgZW50ZXJlZFRpdGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZTtcbiAgICBjb25zdCBlbnRlcmVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlO1xuICAgIGNvbnN0IGVudGVyZWRQZW9wbGUgPSBwYXJzZUZsb2F0KHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlKTtcblxuICAgIGNvbnN0IHRpdGxlVmFsaWRhdGFibGU6IFZhbGlkYXRpb24uVmFsaWRhdGFibGUgPSB7XG4gICAgICB2YWx1ZTogZW50ZXJlZFRpdGxlLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfVxuICAgIGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGFibGU6IFZhbGlkYXRpb24uVmFsaWRhdGFibGUgPSB7XG4gICAgICB2YWx1ZTogZW50ZXJlZERlc2NyaXB0aW9uLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBtaW5MZW5ndGg6IDUsXG4gICAgfVxuICAgIGNvbnN0IHBlb3BsZVZhbGlkYXRhYmxlOiBWYWxpZGF0aW9uLlZhbGlkYXRhYmxlID0ge1xuICAgICAgdmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBtaW46IDEsXG4gICAgICBtYXg6IDVcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhVmFsaWRhdGlvbi52YWxpZGF0ZSh0aXRsZVZhbGlkYXRhYmxlKSB8fFxuICAgICAgIVZhbGlkYXRpb24udmFsaWRhdGUoZGVzY3JpcHRpb25WYWxpZGF0YWJsZSkgfHxcbiAgICAgICFWYWxpZGF0aW9uLnZhbGlkYXRlKHBlb3BsZVZhbGlkYXRhYmxlKVxuICAgICkge1xuICAgICAgYWxlcnQoJ+ycoO2aqO2VmOyngCDslYrsnYAg7J6F66Cl7J6F64uI64ukLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW2VudGVyZWRUaXRsZSwgZW50ZXJlZERlc2NyaXB0aW9uLCBlbnRlcmVkUGVvcGxlXVxuICAgIH1cblxuICB9XG5cbiAgLy8gaW5wdXQg7ZWt66qpIOy0iOq4sO2ZlFxuICBwcml2YXRlIGNsZWFySW5wdXRzKCkge1xuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcbiAgfVxuXG4gIC8vIGZvcm0gZWxlbWVudCDsnbTrsqTtirhcbiAgQGF1dG9iaW5kXG4gIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KCk7XG4gICAgLy8gdHVwbGUgdHlwZeydgCDtg4DsnoXsiqTtgazrpr3tirjsl5Drp4wg7KG07J6s7ZWY7KeA66eMIOq4sOuzuOyggeycvOuhnCDrsLDsl7TsnZgg7ZiV7YOc66W8IOyngOuLiOqzoCDsnojquLAg65WM66y47JeQIOy7tO2MjOydvOuQmOuptCDrsLDsl7Qg66qo7JaR7J2YIOyekOuwlOyKpO2BrOumve2KuOuhnCDrkJjslrTsnojri6QuXG4gICAgLy8g6re4656Y7IScIOqygOymneydhCDsnITtlbQgdHlwZW9mIOuCmCBpbnN0YW5jZW9m66W8IOyCrOyaqSDrqrvtlZjquLAg65WM66y47JeQIOuwsOyXtOydmCDtirnshLHsnLzroZwg7ZmV7J247ZWoXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodXNlcklucHV0KSkge1xuICAgICAgY29uc3QgW3RpdGxlLCBkZXNjLCBwZW9wbGVdID0gdXNlcklucHV0O1xuICAgICAgcHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsIGRlc2MsIHBlb3BsZSk7XG4gICAgICB0aGlzLmNsZWFySW5wdXRzKCk7IC8vIGNsZWFyIGlucHV0XG4gICAgfVxuICB9XG5cblxufVxuXG4iLCJpbXBvcnQgeyBEcmFnZ2FibGUgfSBmcm9tICcuLi9tb2RlbC9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4uL21vZGVsL3Byb2plY3QnXG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vYmFzZS1jb21wb25lbnQnXG5pbXBvcnQgeyBBdXRvQmluZCB9IGZyb20gJy4uL2RlY29yYXRvci9hdXRvQmluZCc7XG5cbi8vIO2UhOuhnOygne2KuCDtla3rqqkg6rSA66asICgg7ZSE66Gc7KCd7Yq4IOyekOyytOulvCDrnpzrjZTrp4Eg7ZWY6riwIOychO2VtOyEnCDsg53shLEgKVxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIGV4dGVuZHMgQ29tcG9uZW50PEhUTUxVTGlzdEVsZW1lbnQsIEhUTUxMSUVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ2dhYmxlIHtcbiAgcHJpdmF0ZSBwcm9qZWN0OiBQcm9qZWN0O1xuXG4gIC8vIGdldHRlciBzZXR0ZXIg64qUIOyDneyEseyekCDsnIQg7YOA7J6F7ISg7Ja4IOuwkeyXkCDrs7TthrUg7JyE7LmYXG4gIGdldCBwZXJzb25zKCkge1xuICAgIGlmICh0aGlzLnByb2plY3QucGVvcGxlID09PSAxKSB7XG4gICAgICByZXR1cm4gJzEg66qFIOuwluyXkCDsl4brhKTsmpQuLidcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMucHJvamVjdC5wZW9wbGV9IOuqhSDssLjqsIAhISFgO1xuICB9XG5cbiAgY29uc3RydWN0b3IoaG9zdElkOiBzdHJpbmcsIHByb2plY3Q6IFByb2plY3QpIHtcbiAgICBzdXBlcignc2luZ2xlLXByb2plY3QnLCBob3N0SWQsIGZhbHNlLCBwcm9qZWN0LmlkKTtcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXG4gICAgdGhpcy5jb25maWd1cmUoKTtcbiAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgfVxuXG4gIEBBdXRvQmluZFxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0aGlzLnByb2plY3QuaWQpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcblxuICB9XG5cbiAgZHJhZ0VuZEhhbmRsZXIoXzogRHJhZ0V2ZW50KTogdm9pZCB7XG4gICAgLy8gY29uc29sZS5sb2coJ2RyYWcg64GdJyk7XG5cbiAgfVxuXG4gIGNvbmZpZ3VyZSgpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kSGFuZGxlcilcbiAgfVxuXG4gIHJlbmRlckNvbnRlbnQoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMycpIS50ZXh0Q29udGVudCA9IHRoaXMucGVyc29uczsgLy8gZ2V0dGVyIO2YuOy2nCDtlZjsl6wg7LKY66asXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AnKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tICcuLi9tb2RlbC9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gJy4uL21vZGVsL3Byb2plY3QnXG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vYmFzZS1jb21wb25lbnQnXG5pbXBvcnQgeyBBdXRvQmluZCB9IGZyb20gJy4uL2RlY29yYXRvci9hdXRvQmluZCc7XG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlJztcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSAnLi9wcm9qZWN0LWl0ZW0nO1xuXG4vL+2UhOuhnOygne2KuCDrpqzsiqTtirgg6rSA66asXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3QgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xuICBhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0eXBlOiAnYWN0aXZlJyB8ICdmaW5pc2hlZCcpIHtcbiAgICAvLyB0aGlzLnR5cGUg7J20IOyVhOuLjCDsnbTsnKDripQgc3VwZXLqsIAg64Gd64KY6riw7KCE7JeQ64qUIHRoaXMueHjrpbwg7IKs7Jqp7ZWgIOyImCDsl4bsnYwuIO2VmOyngOunjCDrp6TqsJzrs4DsiJjrpbwg7IKs7Jqp7ZWgIOyImCDsnojslrTshJwgdHlwZeycvOuhnOunjCDrqoXsi5ztlahcbiAgICBzdXBlcigncHJvamVjdC1saXN0JywgJ2FwcCcsIGZhbHNlLCBgJHt0eXBlfS1wcm9qZWN0c2ApO1xuICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xuXG4gICAgdGhpcy5jb25maWd1cmUoKTtcbiAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbiAgfVxuXG4gIEBBdXRvQmluZFxuICBkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSAndGV4dC9wbGFpbicpIHtcbiAgICAgIC8vIGRyYWcg6rCA64ql7ZWcIO2VreuqqeydtCDslYTri4jrqbQg7J2067Kk7Yq4IOunieq4sFxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgLy8g65Oc66Gt6rCA64ql7ZWcIOyepeyGjOuhnCDsnbTrj5nsnbQg65Cs7J2EIOuVjCwg67Cw6rK97IOJIOyymOumrFxuICAgICAgY29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhO1xuICAgICAgbGlzdEVsLmNsYXNzTGlzdC5hZGQoJ2Ryb3BwYWJsZScpO1xuICAgIH1cbiAgfVxuXG4gIEBBdXRvQmluZFxuICBkcm9wSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKCd0ZXh0L3BsYWluJykpO1xuICAgIGNvbnN0IHByaklkID0gZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgcHJvamVjdFN0YXRlLm1vdmVQcm9qZWN0KHByaklkLCB0aGlzLnR5cGUgPT09ICdhY3RpdmUnID8gUHJvamVjdFN0YXR1cy5BY3RpdmUgOiBQcm9qZWN0U3RhdHVzLkZpbmlzaGVkKVxuICB9XG5cbiAgQEF1dG9CaW5kXG4gIGRyYWdMZWF2ZUhhbmRsZXIoXzogRHJhZ0V2ZW50KSB7XG4gICAgLy8g65Oc66Gt6rCA64ql7ZWcIOyepeyGjOyXkOyEnCDrlqDrgqzsnYQg65WMLCDrsLDqsr3sg4kg7LKY66asXG4gICAgY29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhO1xuICAgIGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZSgpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlcilcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmVIYW5kbGVyKVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcm9wSGFuZGxlcilcblxuICAgIHByb2plY3RTdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xuICAgICAgY29uc3QgcmVsZXZhbnRQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihwcmogPT4ge1xuICAgICAgICBpZiAodGhpcy50eXBlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgIHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkFjdGl2ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJqLnN0YXR1cyA9PT0gUHJvamVjdFN0YXR1cy5GaW5pc2hlZDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSByZWxldmFudFByb2plY3RzO1xuICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xuICAgIH0pXG4gIH1cblxuICAvLyDtg4DsnoXsiqTtgazrpr3tirjsnZgg7LaU7IOBIG1ldGhvZOuKlCBwcml2YXRl66W8IOyngOybkO2VmOyngCDslYrripTri6QuXG4gIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgY29uc3QgbGlzdElkID0gYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YDtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQgPSBsaXN0SWQ7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy50eXBlLnRvVXBwZXJDYXNlKCkgKyAnIFBST0pFQ1RTJztcblxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9qZWN0cygpIHtcbiAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgKSEgYXMgSFRNTFVMaXN0RWxlbWVudDtcbiAgICAvLyDrqqjrk6Ag7ZWt66qp7J2EIOy0iOq4sO2ZlO2VnCDri6TsnYwg66qo65OgIO2VreuqqSDri6Tsi5wg7LaU6rCAXG4gICAgbGlzdEVsLmlubmVySFRNTCA9ICcnO1xuICAgIGZvciAoY29uc3QgcHJqSXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcbiAgICAgIG5ldyBQcm9qZWN0SXRlbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQsIHByakl0ZW0pXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBQcm9qZWN0SW5wdXQgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dCc7XG5pbXBvcnQgeyBQcm9qZWN0TGlzdCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3QnO1xuXG5uZXcgUHJvamVjdElucHV0KCk7XG5uZXcgUHJvamVjdExpc3QoJ2FjdGl2ZScpOyBcbm5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKTsiXSwibmFtZXMiOlsiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5pbmciLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ2YWxpZGF0ZSIsInZhbGlkYXRhYmxlSW5wdXQiLCJpc1ZhbGlkIiwicmVxdWlyZWQiLCJ2YWx1ZSIsInRvU3RyaW5nIiwidHJpbSIsImxlbmd0aCIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm1pbiIsIm1heCIsIkF1dG9CaW5kIiwiX3RhcmdldCIsIl9tZXRob2QiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJnZXQiLCJiaW5kIiwiUHJvamVjdFN0YXR1cyIsIlByb2plY3QiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGVvcGxlIiwic3RhdHVzIiwiUHJvamVjdFN0YXRlIiwibGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lckZuIiwicHVzaCIsInN1cGVyIiwicHJvamVjdHMiLCJzdGF0aWMiLCJpbnN0YW5jZSIsImFkZFByb2plY3QiLCJudW1PZlBlb3BsZSIsIm5ld1Byb2plY3QiLCJNYXRoIiwicmFuZG9tIiwiQWN0aXZlIiwidXBkYXRlTGlzdGVuZXJzIiwibW92ZVByb2plY3QiLCJwcm9qZWN0SWQiLCJuZXdTdGF0dXMiLCJwcm9qZWN0IiwiZmluZCIsInByaiIsInNsaWNlIiwicHJvamVjdFN0YXRlIiwiZ2V0SW5zdGFuY2UiLCJQcm9qZWN0SW5wdXQiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImdhdGhlclVzZXJJbnB1dCIsImVudGVyZWRUaXRsZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJwYXJzZUZsb2F0IiwiZGVzY3JpcHRpb25WYWxpZGF0YWJsZSIsInBlb3BsZVZhbGlkYXRhYmxlIiwiYWxlcnQiLCJjbGVhcklucHV0cyIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VySW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJkZXNjIiwiUHJvamVjdEl0ZW0iLCJob3N0SWQiLCJwZXJzb25zIiwiZHJhZ1N0YXJ0SGFuZGxlciIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJfIiwidGV4dENvbnRlbnQiLCJQcm9qZWN0TGlzdCIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwiZHJhZ092ZXJIYW5kbGVyIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wSGFuZGxlciIsInByaklkIiwiZ2V0RGF0YSIsIkZpbmlzaGVkIiwiZHJhZ0xlYXZlSGFuZGxlciIsInJlbW92ZSIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwiaW5uZXJIVE1MIiwicHJqSXRlbSJdLCJzb3VyY2VSb290IjoiIn0=